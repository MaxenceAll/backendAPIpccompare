21/05/23 02:00:19 :: ===================================================== 
21/05/23 02:00:19 :: // Appel de la method handleAuth de authController // 
21/05/23 02:00:19 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIwVDIyOjUzOjMwLjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3MjA3LCJleHAiOjE2ODQ2MzA4MDd9.cU0BpsO-YH_OHdahfhPUZkDderXJv7IONGYTDIz3XYE 
21/05/23 02:00:19 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secutorz',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-20T22:53:30.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-19T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg'
  },
  role: 'Administrateur',
  iat: 1684627207,
  exp: 1684630807
} 
21/05/23 02:00:19 :: // Appel de la méthode downloadAvatarByIdCustomer de avatarController// 
21/05/23 02:00:19 :: // Appel de la method QUERY de database.service. // 
21/05/23 02:00:19 :: => Requete appelée: SELECT img_src FROM customer WHERE Id_customer = ? 
21/05/23 02:00:19 :: ==>Retour de la requete: [ [ { img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg' } ] ] 
21/05/23 02:00:19 :: ---> Sortie de la method QUERY de database.service. // 
21/05/23 02:00:19 :: Un avatar pour l'Id_customer 6 a été trouvé à l'url suivante C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg. 
21/05/23 02:00:31 :: ===================================================== 
21/05/23 02:00:31 :: // Appel de la method handleAuth de authController // 
21/05/23 02:00:31 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIwVDIyOjUzOjMwLjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3MjA3LCJleHAiOjE2ODQ2MzA4MDd9.cU0BpsO-YH_OHdahfhPUZkDderXJv7IONGYTDIz3XYE 
21/05/23 02:00:31 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secutorz',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-20T22:53:30.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-19T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg'
  },
  role: 'Administrateur',
  iat: 1684627207,
  exp: 1684630807
} 
21/05/23 02:00:31 :: // Appel de la méthode downloadAvatarByIdCustomer de avatarController// 
21/05/23 02:00:31 :: => Requete appelée: SELECT img_src FROM customer WHERE Id_customer = ? 
21/05/23 02:00:31 :: Un avatar pour l'Id_customer 6 a été trouvé à l'url suivante C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg. 
21/05/23 02:00:31 :: // Appel de la method QUERY de database.service. // 
21/05/23 02:00:31 :: ---> Sortie de la method QUERY de database.service. // 
21/05/23 02:00:31 :: ==>Retour de la requete: [ [ { img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg' } ] ] 
21/05/23 02:00:36 :: ===================================================== 
21/05/23 02:00:36 :: // Appel de la method handleAuth de authController // 
21/05/23 02:00:36 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : undefined 
21/05/23 02:00:36 :: XX Pas de cookie accessToken reçu. 
21/05/23 02:00:36 :: ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
21/05/23 02:00:36 :: // Appel de la method handleRefreshToken de refreshTokenController // 
21/05/23 02:00:36 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIwVDIyOjUzOjMwLjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3MjA3LCJleHAiOjE2ODU0OTEyMDd9.-rECttFfzF0WSBqYO9n4_dPLXfsMBxZjmT3XfXel0Ms 
21/05/23 02:00:36 :: // Appel de la method QUERY de database.service. // 
21/05/23 02:00:36 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secutorz',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-20T22:53:30.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-19T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg'
  },
  role: 'Administrateur',
  iat: 1684627207,
  exp: 1685491207
} 
21/05/23 02:00:36 :: => Requete appelée:         
      SELECT account.email, account.password, customer.*, role.*
      FROM account
      JOIN customer ON account.Id_account = customer.Id_account
      JOIN role ON customer.Id_role = role.Id_role
      WHERE account.email = ?
       
21/05/23 02:00:36 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secutorz',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-21T00:00:07.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-19T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg',
      title: 'Administrateur'
    }
  ]
] 
21/05/23 02:00:36 :: ---> Sortie de la method QUERY de database.service. // 
21/05/23 02:00:36 :: ?? Last info de account trouvé est: { email: 'maxoa59@gmail.com' } 
21/05/23 02:00:36 :: ?? Last info de customer trouvé est: {
  Id_account: 6,
  Id_customer: 6,
  Id_role: 3,
  pseudo: 'Secutorz',
  firstname: 'Maxence',
  lastname: 'ALLART',
  last_connection: 2023-05-21T00:00:07.000Z,
  createdBy: 'site',
  createdAt: 2023-04-26T22:00:00.000Z,
  modifiedBy: 'Secu',
  modifiedAt: 2023-05-19T22:00:00.000Z,
  deletedBy: null,
  deletedAt: null,
  img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg'
} 
21/05/23 02:00:36 :: ?? Last info de role trouvé est: { title: 'Administrateur' } 
21/05/23 02:00:36 :: ?? Pour information, un accessToken a été créé pour 1h (Depuis la route refreshToken !) : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIxVDAwOjAwOjA3LjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3MjM2LCJleHAiOjE2ODQ2MzA4MzZ9.WrN0aTucnMOFKb4plcN7Oq-bzHHNiz3lx2e5feyCcdo 
21/05/23 02:00:36 :: !! L'objet préparé pour le retour au Front est le suivant : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secutorz',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: 2023-05-21T00:00:07.000Z,
    createdBy: 'site',
    createdAt: 2023-04-26T22:00:00.000Z,
    modifiedBy: 'Secu',
    modifiedAt: 2023-05-19T22:00:00.000Z,
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg'
  },
  role: 'Administrateur'
} 
21/05/23 02:00:36 :: ==> Tout est ok, On peut renvoyer le nouveau refreshToken et le nouveau accessToken actualisé avec les dernières données. 
21/05/23 02:00:36 :: ?? Pour information, un refreshToken a été créé pour 10d (Depuis la route refreshToken !): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIxVDAwOjAwOjA3LjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3MjM2LCJleHAiOjE2ODU0OTEyMzZ9.3DmmrNJUYLtHrWcszJOzC13PgRhKsMY1ew5rPJheIrQ 
21/05/23 02:00:36 :: ===================================================== 
21/05/23 02:00:36 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIxVDAwOjAwOjA3LjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3MjM2LCJleHAiOjE2ODQ2MzA4MzZ9.WrN0aTucnMOFKb4plcN7Oq-bzHHNiz3lx2e5feyCcdo 
21/05/23 02:00:36 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secutorz',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-21T00:00:07.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-19T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg'
  },
  role: 'Administrateur',
  iat: 1684627236,
  exp: 1684630836
} 
21/05/23 02:00:36 :: // Appel de la method handleAuth de authController // 
21/05/23 02:00:36 :: // Appel de la méthode downloadAvatarByIdCustomer de avatarController// 
21/05/23 02:00:36 :: // Appel de la method QUERY de database.service. // 
21/05/23 02:00:36 :: => Requete appelée: SELECT img_src FROM customer WHERE Id_customer = ? 
21/05/23 02:00:36 :: ==>Retour de la requete: [ [ { img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg' } ] ] 
21/05/23 02:00:36 :: ---> Sortie de la method QUERY de database.service. // 
21/05/23 02:00:36 :: Un avatar pour l'Id_customer 6 a été trouvé à l'url suivante C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg. 
21/05/23 02:03:43 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:03:48 :: ===================================================== 
21/05/23 02:03:48 :: // Appel de la method handleAuth de authController // 
21/05/23 02:03:48 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIxVDAwOjAwOjA3LjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3MjM2LCJleHAiOjE2ODQ2MzA4MzZ9.WrN0aTucnMOFKb4plcN7Oq-bzHHNiz3lx2e5feyCcdo 
21/05/23 02:03:48 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secutorz',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-21T00:00:07.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-19T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg'
  },
  role: 'Administrateur',
  iat: 1684627236,
  exp: 1684630836
} 
21/05/23 02:03:48 :: yo la data suite a la verif auth via accesstoken is : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secutorz',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-21T00:00:07.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-19T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg'
  },
  role: 'Administrateur',
  iat: 1684627236,
  exp: 1684630836
} 
21/05/23 02:03:48 :: // Appel de la méthode downloadAvatarByIdCustomer de avatarController// 
21/05/23 02:03:48 :: // Appel de la method QUERY de database.service. // 
21/05/23 02:03:48 :: Nouvelle connection sur la database: pccompare 
21/05/23 02:03:48 :: => Requete appelée: SELECT img_src FROM customer WHERE Id_customer = ? 
21/05/23 02:03:48 :: ==>Retour de la requete: [ [ { img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg' } ] ] 
21/05/23 02:03:48 :: Un avatar pour l'Id_customer 6 a été trouvé à l'url suivante C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg. 
21/05/23 02:03:48 :: ---> Sortie de la method QUERY de database.service. // 
21/05/23 02:05:14 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:05:33 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:05:36 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:05:41 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:06:06 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:06:08 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:06:42 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:06:54 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:07:14 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:07:18 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:07:32 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:07:34 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:07:35 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:07:37 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:07:40 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:07:42 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:07:44 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:07:45 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:07:53 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:07:57 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:08:18 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:08:24 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:08:31 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:08:34 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:08:37 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:08:58 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:09:07 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:09:19 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:09:28 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:09:34 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:09:35 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:09:36 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:09:39 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:09:40 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:09:50 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:09:52 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:10:12 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:10:15 :: ===================================================== 
21/05/23 02:10:15 :: // Appel de la method handleAuth de authController // 
21/05/23 02:10:15 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIxVDAwOjAwOjA3LjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3MjM2LCJleHAiOjE2ODQ2MzA4MzZ9.WrN0aTucnMOFKb4plcN7Oq-bzHHNiz3lx2e5feyCcdo 
21/05/23 02:10:15 :: XX Erreur lors de la vérification de connexion. ReferenceError: data is not defined
    at Object.handleAuth (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\controllers\v1\login\authController.js:16:87)
    at C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\routes\v1\login\auth.js:9:24
    at Layer.handle [as handle_request] (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\route.js:144:13)
    at Route.dispatch (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\route.js:114:3)
    at Layer.handle [as handle_request] (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\layer.js:95:5)
    at C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:346:12)
    at next (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:280:10)
    at Function.handle (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:175:3) 
21/05/23 02:10:15 :: ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
21/05/23 02:10:15 :: // Appel de la method handleRefreshToken de refreshTokenController // 
21/05/23 02:10:15 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIxVDAwOjAwOjA3LjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3MjM2LCJleHAiOjE2ODU0OTEyMzZ9.3DmmrNJUYLtHrWcszJOzC13PgRhKsMY1ew5rPJheIrQ 
21/05/23 02:10:15 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secutorz',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-21T00:00:07.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-19T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg'
  },
  role: 'Administrateur',
  iat: 1684627236,
  exp: 1685491236
} 
21/05/23 02:10:15 :: // Appel de la method QUERY de database.service. // 
21/05/23 02:10:15 :: Nouvelle connection sur la database: pccompare 
21/05/23 02:10:15 :: => Requete appelée:         
      SELECT account.email, account.password, customer.*, role.*
      FROM account
      JOIN customer ON account.Id_account = customer.Id_account
      JOIN role ON customer.Id_role = role.Id_role
      WHERE account.email = ?
       
21/05/23 02:10:15 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secutorz',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-21T00:00:07.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-19T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg',
      title: 'Administrateur'
    }
  ]
] 
21/05/23 02:10:15 :: ?? Last info de account trouvé est: { email: 'maxoa59@gmail.com' } 
21/05/23 02:10:15 :: ?? Last info de role trouvé est: { title: 'Administrateur' } 
21/05/23 02:10:15 :: !! L'objet préparé pour le retour au Front est le suivant : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secutorz',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: 2023-05-21T00:00:07.000Z,
    createdBy: 'site',
    createdAt: 2023-04-26T22:00:00.000Z,
    modifiedBy: 'Secu',
    modifiedAt: 2023-05-19T22:00:00.000Z,
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg'
  },
  role: 'Administrateur'
} 
21/05/23 02:10:15 :: ?? Last info de customer trouvé est: {
  Id_account: 6,
  Id_customer: 6,
  Id_role: 3,
  pseudo: 'Secutorz',
  firstname: 'Maxence',
  lastname: 'ALLART',
  last_connection: 2023-05-21T00:00:07.000Z,
  createdBy: 'site',
  createdAt: 2023-04-26T22:00:00.000Z,
  modifiedBy: 'Secu',
  modifiedAt: 2023-05-19T22:00:00.000Z,
  deletedBy: null,
  deletedAt: null,
  img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg'
} 
21/05/23 02:10:15 :: ?? Pour information, un accessToken a été créé pour 1h (Depuis la route refreshToken !) : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIxVDAwOjAwOjA3LjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3ODE1LCJleHAiOjE2ODQ2MzE0MTV9.qsx7DsY-rawrtrVGb9W2_vGX_KlXX5fxNkd47Ms7gyM 
21/05/23 02:10:15 :: ?? Pour information, un refreshToken a été créé pour 10d (Depuis la route refreshToken !): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIxVDAwOjAwOjA3LjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3ODE1LCJleHAiOjE2ODU0OTE4MTV9.8N3xzz8RhxhduddmRz17dY2xV_DzkYssqYPtAqTSa0s 
21/05/23 02:10:15 :: ==> Tout est ok, On peut renvoyer le nouveau refreshToken et le nouveau accessToken actualisé avec les dernières données. 
21/05/23 02:10:15 :: ---> Sortie de la method QUERY de database.service. // 
21/05/23 02:10:15 :: ===================================================== 
21/05/23 02:10:15 :: // Appel de la method handleAuth de authController // 
21/05/23 02:10:15 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIxVDAwOjAwOjA3LjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3ODE1LCJleHAiOjE2ODQ2MzE0MTV9.qsx7DsY-rawrtrVGb9W2_vGX_KlXX5fxNkd47Ms7gyM 
21/05/23 02:10:15 :: XX Erreur lors de la vérification de connexion. ReferenceError: data is not defined
    at Object.handleAuth (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\controllers\v1\login\authController.js:16:87)
    at C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\routes\v1\login\auth.js:9:24
    at Layer.handle [as handle_request] (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\route.js:144:13)
    at Route.dispatch (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\route.js:114:3)
    at Layer.handle [as handle_request] (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\layer.js:95:5)
    at C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:346:12)
    at next (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:280:10)
    at Function.handle (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:175:3) 
21/05/23 02:10:52 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:11:00 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIxVDAwOjAwOjA3LjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3ODE1LCJleHAiOjE2ODQ2MzE0MTV9.qsx7DsY-rawrtrVGb9W2_vGX_KlXX5fxNkd47Ms7gyM 
21/05/23 02:11:00 :: // Appel de la method handleAuth de authController // 
21/05/23 02:11:00 :: XX Erreur lors de la vérification de connexion. ReferenceError: data is not defined
    at Object.handleAuth (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\controllers\v1\login\authController.js:16:87)
    at C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\routes\v1\login\auth.js:9:24
    at Layer.handle [as handle_request] (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\route.js:144:13)
    at Route.dispatch (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\route.js:114:3)
    at Layer.handle [as handle_request] (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\layer.js:95:5)
    at C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:346:12)
    at next (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:280:10)
    at Function.handle (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:175:3) 
21/05/23 02:11:00 :: ===================================================== 
21/05/23 02:11:00 :: ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
21/05/23 02:11:00 :: // Appel de la method handleRefreshToken de refreshTokenController // 
21/05/23 02:11:00 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIxVDAwOjAwOjA3LjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3ODE1LCJleHAiOjE2ODU0OTE4MTV9.8N3xzz8RhxhduddmRz17dY2xV_DzkYssqYPtAqTSa0s 
21/05/23 02:11:00 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secutorz',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-21T00:00:07.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-19T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg'
  },
  role: 'Administrateur',
  iat: 1684627815,
  exp: 1685491815
} 
21/05/23 02:11:00 :: // Appel de la method QUERY de database.service. // 
21/05/23 02:11:00 :: Nouvelle connection sur la database: pccompare 
21/05/23 02:11:00 :: => Requete appelée:         
      SELECT account.email, account.password, customer.*, role.*
      FROM account
      JOIN customer ON account.Id_account = customer.Id_account
      JOIN role ON customer.Id_role = role.Id_role
      WHERE account.email = ?
       
21/05/23 02:11:00 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secutorz',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-21T00:00:07.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-19T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg',
      title: 'Administrateur'
    }
  ]
] 
21/05/23 02:11:00 :: ---> Sortie de la method QUERY de database.service. // 
21/05/23 02:11:00 :: ?? Last info de account trouvé est: { email: 'maxoa59@gmail.com' } 
21/05/23 02:11:00 :: ?? Last info de customer trouvé est: {
  Id_account: 6,
  Id_customer: 6,
  Id_role: 3,
  pseudo: 'Secutorz',
  firstname: 'Maxence',
  lastname: 'ALLART',
  last_connection: 2023-05-21T00:00:07.000Z,
  createdBy: 'site',
  createdAt: 2023-04-26T22:00:00.000Z,
  modifiedBy: 'Secu',
  modifiedAt: 2023-05-19T22:00:00.000Z,
  deletedBy: null,
  deletedAt: null,
  img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg'
} 
21/05/23 02:11:00 :: ?? Last info de role trouvé est: { title: 'Administrateur' } 
21/05/23 02:11:00 :: !! L'objet préparé pour le retour au Front est le suivant : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secutorz',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: 2023-05-21T00:00:07.000Z,
    createdBy: 'site',
    createdAt: 2023-04-26T22:00:00.000Z,
    modifiedBy: 'Secu',
    modifiedAt: 2023-05-19T22:00:00.000Z,
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg'
  },
  role: 'Administrateur'
} 
21/05/23 02:11:00 :: ?? Pour information, un accessToken a été créé pour 1h (Depuis la route refreshToken !) : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIxVDAwOjAwOjA3LjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3ODYwLCJleHAiOjE2ODQ2MzE0NjB9.dRlK1yknyKGsARM1g8k1BpZIwOyISYK_emHu6yGv_0E 
21/05/23 02:11:00 :: ?? Pour information, un refreshToken a été créé pour 10d (Depuis la route refreshToken !): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIxVDAwOjAwOjA3LjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3ODYwLCJleHAiOjE2ODU0OTE4NjB9.ehBKr8lwcyVSAv_Et6w7WZ3oRmNGtd8OC9RPTPV4Xw4 
21/05/23 02:11:00 :: ==> Tout est ok, On peut renvoyer le nouveau refreshToken et le nouveau accessToken actualisé avec les dernières données. 
21/05/23 02:11:00 :: ===================================================== 
21/05/23 02:11:00 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIxVDAwOjAwOjA3LjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3ODYwLCJleHAiOjE2ODQ2MzE0NjB9.dRlK1yknyKGsARM1g8k1BpZIwOyISYK_emHu6yGv_0E 
21/05/23 02:11:00 :: XX Erreur lors de la vérification de connexion. ReferenceError: data is not defined
    at Object.handleAuth (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\controllers\v1\login\authController.js:16:87)
    at C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\routes\v1\login\auth.js:9:24
    at Layer.handle [as handle_request] (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\route.js:144:13)
    at Route.dispatch (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\route.js:114:3)
    at Layer.handle [as handle_request] (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\layer.js:95:5)
    at C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:346:12)
    at next (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:280:10)
    at Function.handle (C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\node_modules\express\lib\router\index.js:175:3) 
21/05/23 02:11:00 :: // Appel de la method handleAuth de authController // 
21/05/23 02:11:19 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:11:21 :: Ouverture d'un port d'écoute sur : 5050 
21/05/23 02:11:34 :: ===================================================== 
21/05/23 02:11:34 :: // Appel de la method handleAuth de authController // 
21/05/23 02:11:34 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdXRvcnoiLCJmaXJzdG5hbWUiOiJNYXhlbmNlIiwibGFzdG5hbWUiOiJBTExBUlQiLCJsYXN0X2Nvbm5lY3Rpb24iOiIyMDIzLTA1LTIxVDAwOjAwOjA3LjAwMFoiLCJjcmVhdGVkQnkiOiJzaXRlIiwiY3JlYXRlZEF0IjoiMjAyMy0wNC0yNlQyMjowMDowMC4wMDBaIiwibW9kaWZpZWRCeSI6IlNlY3UiLCJtb2RpZmllZEF0IjoiMjAyMy0wNS0xOVQyMjowMDowMC4wMDBaIiwiZGVsZXRlZEJ5IjpudWxsLCJkZWxldGVkQXQiOm51bGwsImltZ19zcmMiOiIyMDIzLTA1LTE5VDE5LTU4LTMzLjU3NFotSU1HXzIwMjAwNjAzXzE3MTYyOC5qcGcifSwicm9sZSI6IkFkbWluaXN0cmF0ZXVyIiwiaWF0IjoxNjg0NjI3ODYwLCJleHAiOjE2ODQ2MzE0NjB9.dRlK1yknyKGsARM1g8k1BpZIwOyISYK_emHu6yGv_0E 
21/05/23 02:11:34 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env 
21/05/23 02:11:34 :: // Appel de la method QUERY de database.service. // 
21/05/23 02:11:34 :: // Appel de la méthode downloadAvatarByIdCustomer de avatarController// 
21/05/23 02:11:34 :: Nouvelle connection sur la database: pccompare 
21/05/23 02:11:34 :: => Requete appelée: SELECT img_src FROM customer WHERE Id_customer = ? 
21/05/23 02:11:34 :: ==>Retour de la requete: [ [ { img_src: '2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg' } ] ] 
21/05/23 02:11:34 :: Un avatar pour l'Id_customer 6 a été trouvé à l'url suivante C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-19T19-58-33.574Z-IMG_20200603_171628.jpg. 
21/05/23 02:11:34 :: ---> Sortie de la method QUERY de database.service. // 
21/05/23 02:11:55 :: Ouverture d'un port d'écoute sur : 5050 
