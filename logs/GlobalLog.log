19/05/23 02:15:43 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:15:43 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:15:43 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:15:43 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:15:43 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:15:43 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:15:43 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:15:43 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:17:03 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:17:03 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:17:03 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:17:03 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:17:03 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:17:03 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:17:03 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:17:03 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:17:06 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:17:06 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:17:06 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:17:06 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:17:06 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:17:06 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:17:06 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:17:06 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:20:20 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:20:20 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:20:20 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:20:20 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:20:20 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:20:20 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:20:20 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:20:20 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:20:34 :: ===================================================== 
19/05/23 02:20:34 :: // Appel de la method handleAuth de authController // 
19/05/23 02:20:34 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:20:34 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:20:34 :: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
19/05/23 02:20:34 :: // Rentrée dans le middleware verifyRefreshToken // 
19/05/23 02:20:34 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NTMxODk4MX0.k7vuF-jqLYU7M9dkJrSPgcSVAMlx2RdWhoFvnEmInBE 
19/05/23 02:20:34 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:20:34 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1685318981
} 
19/05/23 02:20:34 :: => Requete appelée:         
          SELECT account.email, account.password, customer.*, role.*
          FROM account
          JOIN customer ON account.Id_account = customer.Id_account
          JOIN role ON customer.Id_role = role.Id_role
          WHERE account.email = ?
           
19/05/23 02:20:34 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:20:34 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:20:34 :: ?? On rajoute au REQ pour utilisation futures : {"account":"maxoa59@gmail.com","customer":{"Id_account":6,"Id_customer":6,"Id_role":3,"pseudo":"Secu","firstname":"Maxence","lastname":"ALLART","last_connection":"2023-05-19T00:09:41.000Z","createdBy":"site","createdAt":"2023-04-26T22:00:00.000Z","modifiedBy":"Secu","modifiedAt":"2023-05-17T22:00:00.000Z","deletedBy":null,"deletedAt":null,"img_src":"2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg"},"role":"Administrateur"} 
19/05/23 02:20:35 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:20:35 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:20:35 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:20:35 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:20:35 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:20:35 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:20:35 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:20:35 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:22:08 :: // Appel de la method handleAuth de authController // 
19/05/23 02:22:08 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:22:08 :: ===================================================== 
19/05/23 02:22:08 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:22:09 :: ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
19/05/23 02:22:09 :: // Appel de la method handleRefreshToken de refreshTokenController // 
19/05/23 02:22:09 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NTMxODk4MX0.k7vuF-jqLYU7M9dkJrSPgcSVAMlx2RdWhoFvnEmInBE 
19/05/23 02:22:09 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:22:09 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1685318981
} 
19/05/23 02:22:09 :: => Requete appelée:         
      SELECT account.email, account.password, customer.*, role.*
      FROM account
      JOIN customer ON account.Id_account = customer.Id_account
      JOIN role ON customer.Id_role = role.Id_role
      WHERE account.email = ?
       
19/05/23 02:22:09 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:22:09 :: ?? Last info de customer trouvé est: {
  Id_account: 6,
  Id_customer: 6,
  Id_role: 3,
  pseudo: 'Secu',
  firstname: 'Maxence',
  lastname: 'ALLART',
  last_connection: 2023-05-19T00:09:41.000Z,
  createdBy: 'site',
  createdAt: 2023-04-26T22:00:00.000Z,
  modifiedBy: 'Secu',
  modifiedAt: 2023-05-17T22:00:00.000Z,
  deletedBy: null,
  deletedAt: null,
  img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
} 
19/05/23 02:22:09 :: ?? Last info de account trouvé est: { email: 'maxoa59@gmail.com' } 
19/05/23 02:22:09 :: ?? Last info de role trouvé est: { title: 'Administrateur' } 
19/05/23 02:22:09 :: !! L'objet préparé pour le retour au Front est le suivant : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: 2023-05-19T00:09:41.000Z,
    createdBy: 'site',
    createdAt: 2023-04-26T22:00:00.000Z,
    modifiedBy: 'Secu',
    modifiedAt: 2023-05-17T22:00:00.000Z,
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur'
} 
19/05/23 02:22:09 :: ?? Pour information, un accessToken a été créé pour 1h (Depuis la route refreshToken !) : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTU3MjksImV4cCI6MTY4NDQ1OTMyOX0.yDY5NtdRipIPRTZ5Ju-brVnkb5E6fEYiYJoWR4-Tpno 
19/05/23 02:22:09 :: ?? Pour information, un refreshToken a été créé pour 10d (Depuis la route refreshToken !): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTU3MjksImV4cCI6MTY4NTMxOTcyOX0.2nw7NN_jBZQ3gYVM64RR2q4xUCxEtGfUQlkfvcngpd8 
19/05/23 02:22:09 :: ==> Tout est ok, On peut renvoyer le nouveau refreshToken et le nouveau accessToken actualisé avec les dernières données. 
19/05/23 02:22:09 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:22:53 :: Ouverture d'un port d'écoute sur : 5050 
19/05/23 02:22:54 :: Ouverture d'un port d'écoute sur : 5050 
19/05/23 02:22:58 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:22:58 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:22:58 :: Nouvelle connection sur la database: pccompare 
19/05/23 02:22:58 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:22:58 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:22:58 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:22:58 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:22:58 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:22:58 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:23:55 :: ===================================================== 
19/05/23 02:23:55 :: // Appel de la method handleAuth de authController // 
19/05/23 02:23:55 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:23:55 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:23:55 :: // Appel de la method handleRefreshToken de refreshTokenController // 
19/05/23 02:23:55 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTU3MjksImV4cCI6MTY4NTMxOTcyOX0.2nw7NN_jBZQ3gYVM64RR2q4xUCxEtGfUQlkfvcngpd8 
19/05/23 02:23:55 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684455729,
  exp: 1685319729
} 
19/05/23 02:23:55 :: ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
19/05/23 02:23:55 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:23:55 :: => Requete appelée:         
      SELECT account.email, account.password, customer.*, role.*
      FROM account
      JOIN customer ON account.Id_account = customer.Id_account
      JOIN role ON customer.Id_role = role.Id_role
      WHERE account.email = ?
       
19/05/23 02:23:55 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:23:55 :: ?? Last info de customer trouvé est: {
  Id_account: 6,
  Id_customer: 6,
  Id_role: 3,
  pseudo: 'Secu',
  firstname: 'Maxence',
  lastname: 'ALLART',
  last_connection: 2023-05-19T00:09:41.000Z,
  createdBy: 'site',
  createdAt: 2023-04-26T22:00:00.000Z,
  modifiedBy: 'Secu',
  modifiedAt: 2023-05-17T22:00:00.000Z,
  deletedBy: null,
  deletedAt: null,
  img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
} 
19/05/23 02:23:55 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:23:55 :: ?? Last info de account trouvé est: { email: 'maxoa59@gmail.com' } 
19/05/23 02:23:55 :: !! L'objet préparé pour le retour au Front est le suivant : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: 2023-05-19T00:09:41.000Z,
    createdBy: 'site',
    createdAt: 2023-04-26T22:00:00.000Z,
    modifiedBy: 'Secu',
    modifiedAt: 2023-05-17T22:00:00.000Z,
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur'
} 
19/05/23 02:23:55 :: ?? Pour information, un accessToken a été créé pour 1h (Depuis la route refreshToken !) : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTU4MzUsImV4cCI6MTY4NDQ1OTQzNX0.lNtq27KOB7JsLTYCUXkjI1HOyRZ5fECNxmG7C8ffT2k 
19/05/23 02:23:55 :: ?? Pour information, un refreshToken a été créé pour 10d (Depuis la route refreshToken !): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTU4MzUsImV4cCI6MTY4NTMxOTgzNX0.yrDuv9BzLlcm8nt_bqJuMCueCG8-AseVT4RnY4-QV9A 
19/05/23 02:23:55 :: ?? Last info de role trouvé est: { title: 'Administrateur' } 
19/05/23 02:23:55 :: ==> Tout est ok, On peut renvoyer le nouveau refreshToken et le nouveau accessToken actualisé avec les dernières données. 
19/05/23 02:24:00 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:24:00 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:24:00 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:24:00 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:24:00 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:24:00 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:24:00 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:24:00 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:24:48 :: ===================================================== 
19/05/23 02:24:48 :: // Appel de la method handleAuth de authController // 
19/05/23 02:24:48 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:24:48 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:24:48 :: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
19/05/23 02:24:48 :: // Rentrée dans le middleware verifyRefreshToken // 
19/05/23 02:24:48 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTU4MzUsImV4cCI6MTY4NTMxOTgzNX0.yrDuv9BzLlcm8nt_bqJuMCueCG8-AseVT4RnY4-QV9A 
19/05/23 02:24:48 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684455835,
  exp: 1685319835
} 
19/05/23 02:24:48 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:24:48 :: => Requete appelée:         
          SELECT account.email, account.password, customer.*, role.*
          FROM account
          JOIN customer ON account.Id_account = customer.Id_account
          JOIN role ON customer.Id_role = role.Id_role
          WHERE account.email = ?
           
19/05/23 02:24:48 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:24:48 :: ?? On rajoute au REQ pour utilisation futures : {"account":"maxoa59@gmail.com","customer":{"Id_account":6,"Id_customer":6,"Id_role":3,"pseudo":"Secu","firstname":"Maxence","lastname":"ALLART","last_connection":"2023-05-19T00:09:41.000Z","createdBy":"site","createdAt":"2023-04-26T22:00:00.000Z","modifiedBy":"Secu","modifiedAt":"2023-05-17T22:00:00.000Z","deletedBy":null,"deletedAt":null,"img_src":"2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg"},"role":"Administrateur"} 
19/05/23 02:24:48 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:25:17 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:25:17 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:25:17 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:25:17 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:25:17 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:25:17 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:25:17 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:25:17 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:26:16 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:26:16 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:26:16 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:26:16 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:26:16 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:26:16 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:26:16 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:26:16 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:26:58 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:26:58 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:26:58 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:26:58 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:26:58 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:26:58 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:26:58 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:26:58 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:29:13 :: Ouverture d'un port d'écoute sur : 5050 
19/05/23 02:29:26 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:29:26 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:29:26 :: Nouvelle connection sur la database: pccompare 
19/05/23 02:29:26 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:29:26 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:29:26 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:29:26 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:29:26 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:29:26 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:29:26 :: ++ !!!! Erreur attrapée dans method downloadAvatarByIdCustomer de avatarController: ReferenceError: mime is not defined. 
19/05/23 02:29:34 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:29:34 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:29:34 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:29:34 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:29:34 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:29:34 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:29:34 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:29:34 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:29:34 :: ++ !!!! Erreur attrapée dans method downloadAvatarByIdCustomer de avatarController: ReferenceError: mime is not defined. 
19/05/23 02:29:56 :: Ouverture d'un port d'écoute sur : 5050 
19/05/23 02:29:57 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:29:57 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:29:57 :: Nouvelle connection sur la database: pccompare 
19/05/23 02:29:57 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:29:57 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:29:57 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:29:57 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:29:57 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:29:57 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:30:03 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:30:03 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:30:03 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:30:03 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:30:03 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:30:03 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:30:03 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:30:03 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:33:03 :: Ouverture d'un port d'écoute sur : 5050 
19/05/23 02:33:07 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:33:07 :: Nouvelle connection sur la database: pccompare 
19/05/23 02:33:07 :: => Requete appelée: 
          SELECT img_src
          FROM customer 
          WHERE Id_customer = ?
         
19/05/23 02:33:07 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:33:07 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:33:29 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:33:29 :: => Requete appelée: 
          SELECT img_src
          FROM customer 
          WHERE Id_customer = ?
         
19/05/23 02:33:29 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:33:29 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:34:28 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:34:28 :: => Requete appelée: 
          SELECT img_src
          FROM customer 
          WHERE Id_customer = ?
         
19/05/23 02:34:28 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:34:28 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:34:33 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:34:33 :: => Requete appelée: 
          SELECT img_src
          FROM customer 
          WHERE Id_customer = ?
         
19/05/23 02:34:33 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:34:33 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:34:42 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:34:42 :: => Requete appelée: 
          SELECT img_src
          FROM customer 
          WHERE Id_customer = ?
         
19/05/23 02:34:42 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:34:42 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:35:59 :: Ouverture d'un port d'écoute sur : 5050 
19/05/23 02:36:16 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:36:16 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:36:16 :: Nouvelle connection sur la database: pccompare 
19/05/23 02:36:16 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:36:16 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:36:16 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:36:16 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:36:16 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:36:16 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:36:45 :: ===================================================== 
19/05/23 02:36:45 :: // Appel de la method handleAuth de authController // 
19/05/23 02:36:45 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:36:45 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:36:45 :: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
19/05/23 02:36:45 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTU4MzUsImV4cCI6MTY4NTMxOTgzNX0.yrDuv9BzLlcm8nt_bqJuMCueCG8-AseVT4RnY4-QV9A 
19/05/23 02:36:45 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:36:45 :: // Rentrée dans le middleware verifyRefreshToken // 
19/05/23 02:36:45 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684455835,
  exp: 1685319835
} 
19/05/23 02:36:45 :: => Requete appelée:         
          SELECT account.email, account.password, customer.*, role.*
          FROM account
          JOIN customer ON account.Id_account = customer.Id_account
          JOIN role ON customer.Id_role = role.Id_role
          WHERE account.email = ?
           
19/05/23 02:36:45 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:36:45 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:36:45 :: ?? On rajoute au REQ pour utilisation futures : {"account":"maxoa59@gmail.com","customer":{"Id_account":6,"Id_customer":6,"Id_role":3,"pseudo":"Secu","firstname":"Maxence","lastname":"ALLART","last_connection":"2023-05-19T00:09:41.000Z","createdBy":"site","createdAt":"2023-04-26T22:00:00.000Z","modifiedBy":"Secu","modifiedAt":"2023-05-17T22:00:00.000Z","deletedBy":null,"deletedAt":null,"img_src":"2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg"},"role":"Administrateur"} 
19/05/23 02:36:46 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:36:46 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:36:46 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:36:46 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:36:46 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:36:46 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:36:46 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:36:46 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:36:53 :: ===================================================== 
19/05/23 02:36:53 :: // Appel de la method handleAuth de authController // 
19/05/23 02:36:53 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:36:53 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:36:53 :: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
19/05/23 02:36:53 :: // Rentrée dans le middleware verifyRefreshToken // 
19/05/23 02:36:53 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:36:53 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684455835,
  exp: 1685319835
} 
19/05/23 02:36:53 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTU4MzUsImV4cCI6MTY4NTMxOTgzNX0.yrDuv9BzLlcm8nt_bqJuMCueCG8-AseVT4RnY4-QV9A 
19/05/23 02:36:53 :: => Requete appelée:         
          SELECT account.email, account.password, customer.*, role.*
          FROM account
          JOIN customer ON account.Id_account = customer.Id_account
          JOIN role ON customer.Id_role = role.Id_role
          WHERE account.email = ?
           
19/05/23 02:36:53 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:36:53 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:36:53 :: ?? On rajoute au REQ pour utilisation futures : {"account":"maxoa59@gmail.com","customer":{"Id_account":6,"Id_customer":6,"Id_role":3,"pseudo":"Secu","firstname":"Maxence","lastname":"ALLART","last_connection":"2023-05-19T00:09:41.000Z","createdBy":"site","createdAt":"2023-04-26T22:00:00.000Z","modifiedBy":"Secu","modifiedAt":"2023-05-17T22:00:00.000Z","deletedBy":null,"deletedAt":null,"img_src":"2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg"},"role":"Administrateur"} 
19/05/23 02:36:55 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:36:55 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:36:55 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:36:55 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:36:55 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:36:55 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:36:55 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:36:55 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:39:30 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:39:30 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:39:30 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:39:30 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:39:30 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:39:30 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:39:30 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:39:30 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:39:37 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:39:37 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:39:37 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:39:37 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:39:37 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:39:37 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:39:37 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:39:37 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:39:42 :: ===================================================== 
19/05/23 02:39:42 :: // Appel de la method handleAuth de authController // 
19/05/23 02:39:42 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:39:42 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:39:42 :: ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
19/05/23 02:39:42 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTU4MzUsImV4cCI6MTY4NTMxOTgzNX0.yrDuv9BzLlcm8nt_bqJuMCueCG8-AseVT4RnY4-QV9A 
19/05/23 02:39:42 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684455835,
  exp: 1685319835
} 
19/05/23 02:39:42 :: // Appel de la method handleRefreshToken de refreshTokenController // 
19/05/23 02:39:42 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:39:42 :: => Requete appelée:         
      SELECT account.email, account.password, customer.*, role.*
      FROM account
      JOIN customer ON account.Id_account = customer.Id_account
      JOIN role ON customer.Id_role = role.Id_role
      WHERE account.email = ?
       
19/05/23 02:39:42 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:39:42 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:39:42 :: ?? Last info de account trouvé est: { email: 'maxoa59@gmail.com' } 
19/05/23 02:39:42 :: ?? Last info de customer trouvé est: {
  Id_account: 6,
  Id_customer: 6,
  Id_role: 3,
  pseudo: 'Secu',
  firstname: 'Maxence',
  lastname: 'ALLART',
  last_connection: 2023-05-19T00:09:41.000Z,
  createdBy: 'site',
  createdAt: 2023-04-26T22:00:00.000Z,
  modifiedBy: 'Secu',
  modifiedAt: 2023-05-17T22:00:00.000Z,
  deletedBy: null,
  deletedAt: null,
  img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
} 
19/05/23 02:39:42 :: ?? Last info de role trouvé est: { title: 'Administrateur' } 
19/05/23 02:39:42 :: !! L'objet préparé pour le retour au Front est le suivant : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: 2023-05-19T00:09:41.000Z,
    createdBy: 'site',
    createdAt: 2023-04-26T22:00:00.000Z,
    modifiedBy: 'Secu',
    modifiedAt: 2023-05-17T22:00:00.000Z,
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur'
} 
19/05/23 02:39:42 :: ?? Pour information, un accessToken a été créé pour 1h (Depuis la route refreshToken !) : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTY3ODIsImV4cCI6MTY4NDQ2MDM4Mn0.rA4Crz4xv2BhWo6NcKIvdKrArrF2x5VF_OQckkjciJ0 
19/05/23 02:39:42 :: ?? Pour information, un refreshToken a été créé pour 10d (Depuis la route refreshToken !): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTY3ODIsImV4cCI6MTY4NTMyMDc4Mn0.pPb68DWjHIXuEfCd2vpiFFXiquUKTisJyO6Zry0pAvQ 
19/05/23 02:39:42 :: ==> Tout est ok, On peut renvoyer le nouveau refreshToken et le nouveau accessToken actualisé avec les dernières données. 
19/05/23 02:39:45 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:39:45 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:39:45 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:39:45 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:39:45 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:39:45 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:39:45 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:39:45 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:39:59 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:39:59 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:39:59 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:39:59 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:39:59 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:39:59 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:39:59 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:39:59 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:40:13 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:40:13 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:40:13 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:40:13 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:40:13 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:40:13 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:40:13 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:40:13 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:40:49 :: ===================================================== 
19/05/23 02:40:49 :: // Appel de la method handleAuth de authController // 
19/05/23 02:40:49 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:40:49 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:40:49 :: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
19/05/23 02:40:49 :: // Rentrée dans le middleware verifyRefreshToken // 
19/05/23 02:40:49 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTY3ODIsImV4cCI6MTY4NTMyMDc4Mn0.pPb68DWjHIXuEfCd2vpiFFXiquUKTisJyO6Zry0pAvQ 
19/05/23 02:40:49 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:40:49 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684456782,
  exp: 1685320782
} 
19/05/23 02:40:49 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:40:49 :: => Requete appelée:         
          SELECT account.email, account.password, customer.*, role.*
          FROM account
          JOIN customer ON account.Id_account = customer.Id_account
          JOIN role ON customer.Id_role = role.Id_role
          WHERE account.email = ?
           
19/05/23 02:40:49 :: ?? On rajoute au REQ pour utilisation futures : {"account":"maxoa59@gmail.com","customer":{"Id_account":6,"Id_customer":6,"Id_role":3,"pseudo":"Secu","firstname":"Maxence","lastname":"ALLART","last_connection":"2023-05-19T00:09:41.000Z","createdBy":"site","createdAt":"2023-04-26T22:00:00.000Z","modifiedBy":"Secu","modifiedAt":"2023-05-17T22:00:00.000Z","deletedBy":null,"deletedAt":null,"img_src":"2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg"},"role":"Administrateur"} 
19/05/23 02:40:49 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:40:59 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:40:59 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:40:59 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:40:59 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:40:59 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:40:59 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:40:59 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:40:59 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:41:27 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:41:27 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:41:27 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:41:27 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:41:27 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:41:27 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:41:27 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:41:27 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:43:44 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:43:44 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:43:44 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:43:44 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:43:44 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:43:44 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:43:44 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:43:44 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:43:49 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:43:49 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:43:49 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:43:49 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:43:49 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:43:49 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:43:49 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:43:49 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:44:21 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:44:21 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:44:21 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:44:21 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:44:21 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:44:21 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:44:21 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:44:21 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:03 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:46:03 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:46:03 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:46:03 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:46:03 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:46:03 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:46:03 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:03 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:05 :: ===================================================== 
19/05/23 02:46:05 :: // Appel de la method handleAuth de authController // 
19/05/23 02:46:05 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:46:05 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:46:05 :: ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
19/05/23 02:46:05 :: // Appel de la method handleRefreshToken de refreshTokenController // 
19/05/23 02:46:05 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTY3ODIsImV4cCI6MTY4NTMyMDc4Mn0.pPb68DWjHIXuEfCd2vpiFFXiquUKTisJyO6Zry0pAvQ 
19/05/23 02:46:05 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684456782,
  exp: 1685320782
} 
19/05/23 02:46:05 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:46:05 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:46:05 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:46:05 :: ?? Last info de account trouvé est: { email: 'maxoa59@gmail.com' } 
19/05/23 02:46:05 :: ?? Last info de customer trouvé est: {
  Id_account: 6,
  Id_customer: 6,
  Id_role: 3,
  pseudo: 'Secu',
  firstname: 'Maxence',
  lastname: 'ALLART',
  last_connection: 2023-05-19T00:09:41.000Z,
  createdBy: 'site',
  createdAt: 2023-04-26T22:00:00.000Z,
  modifiedBy: 'Secu',
  modifiedAt: 2023-05-17T22:00:00.000Z,
  deletedBy: null,
  deletedAt: null,
  img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
} 
19/05/23 02:46:05 :: => Requete appelée:         
      SELECT account.email, account.password, customer.*, role.*
      FROM account
      JOIN customer ON account.Id_account = customer.Id_account
      JOIN role ON customer.Id_role = role.Id_role
      WHERE account.email = ?
       
19/05/23 02:46:05 :: ?? Last info de role trouvé est: { title: 'Administrateur' } 
19/05/23 02:46:05 :: !! L'objet préparé pour le retour au Front est le suivant : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: 2023-05-19T00:09:41.000Z,
    createdBy: 'site',
    createdAt: 2023-04-26T22:00:00.000Z,
    modifiedBy: 'Secu',
    modifiedAt: 2023-05-17T22:00:00.000Z,
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur'
} 
19/05/23 02:46:05 :: ?? Pour information, un accessToken a été créé pour 1h (Depuis la route refreshToken !) : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcxNjUsImV4cCI6MTY4NDQ2MDc2NX0.SnqnTn2iwjbt24cWWLdpwk52GzFBhIMqbe0qyZxImHA 
19/05/23 02:46:05 :: ==> Tout est ok, On peut renvoyer le nouveau refreshToken et le nouveau accessToken actualisé avec les dernières données. 
19/05/23 02:46:05 :: ?? Pour information, un refreshToken a été créé pour 10d (Depuis la route refreshToken !): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcxNjUsImV4cCI6MTY4NTMyMTE2NX0.v7yVUzobYH3I4M8B58cTz28njhNhGI0O8Z9rdP_a3yc 
19/05/23 02:46:06 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:46:06 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:46:06 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:46:06 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:46:06 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:46:06 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:06 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:06 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:46:08 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:46:08 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:46:08 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:46:08 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:46:08 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:46:08 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:46:08 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:08 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:19 :: ===================================================== 
19/05/23 02:46:19 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:46:19 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:46:19 :: // Appel de la method handleAuth de authController // 
19/05/23 02:46:19 :: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
19/05/23 02:46:19 :: // Rentrée dans le middleware verifyRefreshToken // 
19/05/23 02:46:19 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcxNjUsImV4cCI6MTY4NTMyMTE2NX0.v7yVUzobYH3I4M8B58cTz28njhNhGI0O8Z9rdP_a3yc 
19/05/23 02:46:19 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684457165,
  exp: 1685321165
} 
19/05/23 02:46:19 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:46:19 :: => Requete appelée:         
          SELECT account.email, account.password, customer.*, role.*
          FROM account
          JOIN customer ON account.Id_account = customer.Id_account
          JOIN role ON customer.Id_role = role.Id_role
          WHERE account.email = ?
           
19/05/23 02:46:19 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:46:19 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:46:19 :: ?? On rajoute au REQ pour utilisation futures : {"account":"maxoa59@gmail.com","customer":{"Id_account":6,"Id_customer":6,"Id_role":3,"pseudo":"Secu","firstname":"Maxence","lastname":"ALLART","last_connection":"2023-05-19T00:09:41.000Z","createdBy":"site","createdAt":"2023-04-26T22:00:00.000Z","modifiedBy":"Secu","modifiedAt":"2023-05-17T22:00:00.000Z","deletedBy":null,"deletedAt":null,"img_src":"2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg"},"role":"Administrateur"} 
19/05/23 02:46:39 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:46:39 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:46:39 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:46:39 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:46:39 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:46:39 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:46:39 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:39 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:47 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:46:47 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:46:47 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:46:47 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:46:47 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:46:47 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:46:47 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:47 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:51 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:46:51 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:46:51 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:46:51 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:46:51 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:46:51 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:51 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:51 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:46:51 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:46:51 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:46:51 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:46:51 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:46:51 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:46:51 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:46:51 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:51 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:51 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:46:51 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:46:51 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:46:51 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:46:51 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:46:51 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:51 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:51 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:46:51 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:46:51 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:46:51 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:46:51 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:46:51 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:46:51 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:46:51 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:46:51 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:48:05 :: ===================================================== 
19/05/23 02:48:05 :: // Appel de la method handleAuth de authController // 
19/05/23 02:48:05 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:48:05 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:48:05 :: ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
19/05/23 02:48:05 :: // Appel de la method handleRefreshToken de refreshTokenController // 
19/05/23 02:48:05 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684457165,
  exp: 1685321165
} 
19/05/23 02:48:05 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcxNjUsImV4cCI6MTY4NTMyMTE2NX0.v7yVUzobYH3I4M8B58cTz28njhNhGI0O8Z9rdP_a3yc 
19/05/23 02:48:05 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:48:05 :: => Requete appelée:         
      SELECT account.email, account.password, customer.*, role.*
      FROM account
      JOIN customer ON account.Id_account = customer.Id_account
      JOIN role ON customer.Id_role = role.Id_role
      WHERE account.email = ?
       
19/05/23 02:48:05 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:48:05 :: ?? Last info de account trouvé est: { email: 'maxoa59@gmail.com' } 
19/05/23 02:48:05 :: ?? Last info de customer trouvé est: {
  Id_account: 6,
  Id_customer: 6,
  Id_role: 3,
  pseudo: 'Secu',
  firstname: 'Maxence',
  lastname: 'ALLART',
  last_connection: 2023-05-19T00:09:41.000Z,
  createdBy: 'site',
  createdAt: 2023-04-26T22:00:00.000Z,
  modifiedBy: 'Secu',
  modifiedAt: 2023-05-17T22:00:00.000Z,
  deletedBy: null,
  deletedAt: null,
  img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
} 
19/05/23 02:48:05 :: !! L'objet préparé pour le retour au Front est le suivant : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: 2023-05-19T00:09:41.000Z,
    createdBy: 'site',
    createdAt: 2023-04-26T22:00:00.000Z,
    modifiedBy: 'Secu',
    modifiedAt: 2023-05-17T22:00:00.000Z,
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur'
} 
19/05/23 02:48:05 :: ?? Pour information, un accessToken a été créé pour 1h (Depuis la route refreshToken !) : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcyODUsImV4cCI6MTY4NDQ2MDg4NX0.vHbk0BDd-WXAYFeDrgo3WTp_1u_mg6qkTmiSJJAPEgI 
19/05/23 02:48:05 :: ?? Pour information, un refreshToken a été créé pour 10d (Depuis la route refreshToken !): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcyODUsImV4cCI6MTY4NTMyMTI4NX0.oIRrR7TGldfKl4k_SLm6qg-B_PoVua_TlKi70kieURg 
19/05/23 02:48:05 :: ==> Tout est ok, On peut renvoyer le nouveau refreshToken et le nouveau accessToken actualisé avec les dernières données. 
19/05/23 02:48:05 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:48:05 :: ?? Last info de role trouvé est: { title: 'Administrateur' } 
19/05/23 02:48:08 :: ===================================================== 
19/05/23 02:48:08 :: // Appel de la method handleAuth de authController // 
19/05/23 02:48:08 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:48:08 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:48:08 :: ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
19/05/23 02:48:08 :: // Appel de la method handleRefreshToken de refreshTokenController // 
19/05/23 02:48:08 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684457285,
  exp: 1685321285
} 
19/05/23 02:48:08 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcyODUsImV4cCI6MTY4NTMyMTI4NX0.oIRrR7TGldfKl4k_SLm6qg-B_PoVua_TlKi70kieURg 
19/05/23 02:48:08 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:48:08 :: => Requete appelée:         
      SELECT account.email, account.password, customer.*, role.*
      FROM account
      JOIN customer ON account.Id_account = customer.Id_account
      JOIN role ON customer.Id_role = role.Id_role
      WHERE account.email = ?
       
19/05/23 02:48:08 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:48:08 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:48:08 :: ?? Last info de account trouvé est: { email: 'maxoa59@gmail.com' } 
19/05/23 02:48:08 :: ?? Last info de customer trouvé est: {
  Id_account: 6,
  Id_customer: 6,
  Id_role: 3,
  pseudo: 'Secu',
  firstname: 'Maxence',
  lastname: 'ALLART',
  last_connection: 2023-05-19T00:09:41.000Z,
  createdBy: 'site',
  createdAt: 2023-04-26T22:00:00.000Z,
  modifiedBy: 'Secu',
  modifiedAt: 2023-05-17T22:00:00.000Z,
  deletedBy: null,
  deletedAt: null,
  img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
} 
19/05/23 02:48:08 :: ?? Last info de role trouvé est: { title: 'Administrateur' } 
19/05/23 02:48:08 :: !! L'objet préparé pour le retour au Front est le suivant : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: 2023-05-19T00:09:41.000Z,
    createdBy: 'site',
    createdAt: 2023-04-26T22:00:00.000Z,
    modifiedBy: 'Secu',
    modifiedAt: 2023-05-17T22:00:00.000Z,
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur'
} 
19/05/23 02:48:08 :: ?? Pour information, un refreshToken a été créé pour 10d (Depuis la route refreshToken !): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcyODgsImV4cCI6MTY4NTMyMTI4OH0.1CHieEDpGqwRosdsrDemwTU_Zg2Dntx8vhoxENPvLBw 
19/05/23 02:48:08 :: ?? Pour information, un accessToken a été créé pour 1h (Depuis la route refreshToken !) : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcyODgsImV4cCI6MTY4NDQ2MDg4OH0.V-kHVZAaTCiS9uePVYJS-Rk3SgxIGQLizY2Q8udeIhI 
19/05/23 02:48:08 :: ==> Tout est ok, On peut renvoyer le nouveau refreshToken et le nouveau accessToken actualisé avec les dernières données. 
19/05/23 02:48:10 :: ===================================================== 
19/05/23 02:48:10 :: // Appel de la method handleAuth de authController // 
19/05/23 02:48:10 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:48:10 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:48:10 :: ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
19/05/23 02:48:10 :: // Appel de la method handleRefreshToken de refreshTokenController // 
19/05/23 02:48:10 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcyODgsImV4cCI6MTY4NTMyMTI4OH0.1CHieEDpGqwRosdsrDemwTU_Zg2Dntx8vhoxENPvLBw 
19/05/23 02:48:10 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684457288,
  exp: 1685321288
} 
19/05/23 02:48:10 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:48:10 :: => Requete appelée:         
      SELECT account.email, account.password, customer.*, role.*
      FROM account
      JOIN customer ON account.Id_account = customer.Id_account
      JOIN role ON customer.Id_role = role.Id_role
      WHERE account.email = ?
       
19/05/23 02:48:10 :: ?? Last info de account trouvé est: { email: 'maxoa59@gmail.com' } 
19/05/23 02:48:10 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:48:10 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:48:10 :: ?? Last info de customer trouvé est: {
  Id_account: 6,
  Id_customer: 6,
  Id_role: 3,
  pseudo: 'Secu',
  firstname: 'Maxence',
  lastname: 'ALLART',
  last_connection: 2023-05-19T00:09:41.000Z,
  createdBy: 'site',
  createdAt: 2023-04-26T22:00:00.000Z,
  modifiedBy: 'Secu',
  modifiedAt: 2023-05-17T22:00:00.000Z,
  deletedBy: null,
  deletedAt: null,
  img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
} 
19/05/23 02:48:10 :: !! L'objet préparé pour le retour au Front est le suivant : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: 2023-05-19T00:09:41.000Z,
    createdBy: 'site',
    createdAt: 2023-04-26T22:00:00.000Z,
    modifiedBy: 'Secu',
    modifiedAt: 2023-05-17T22:00:00.000Z,
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur'
} 
19/05/23 02:48:10 :: ?? Last info de role trouvé est: { title: 'Administrateur' } 
19/05/23 02:48:10 :: ?? Pour information, un refreshToken a été créé pour 10d (Depuis la route refreshToken !): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcyOTAsImV4cCI6MTY4NTMyMTI5MH0.Qc2edSjLz4ojFHwui-5E9koippYhkVuzWwkqTYLG-3g 
19/05/23 02:48:10 :: ?? Pour information, un accessToken a été créé pour 1h (Depuis la route refreshToken !) : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcyOTAsImV4cCI6MTY4NDQ2MDg5MH0.JCPvG9rKB_XBAx1JYw_7YXYys82pmWGegnHOR21yqug 
19/05/23 02:48:10 :: ==> Tout est ok, On peut renvoyer le nouveau refreshToken et le nouveau accessToken actualisé avec les dernières données. 
19/05/23 02:48:14 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:48:14 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:48:14 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:48:14 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:48:14 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:48:14 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:48:14 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:48:14 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:48:30 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:48:30 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:48:30 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:48:30 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:48:30 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:48:30 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:48:30 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:48:30 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:48:36 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:48:36 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:48:36 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:48:36 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:48:36 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:48:36 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:48:36 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:48:36 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:49:06 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:49:06 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:49:06 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:49:06 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:49:06 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:49:06 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:49:06 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:49:06 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:50:00 :: ===================================================== 
19/05/23 02:50:00 :: // Appel de la method handleAuth de authController // 
19/05/23 02:50:00 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:50:00 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:50:00 :: // Rentrée dans le middleware verifyRefreshToken // 
19/05/23 02:50:00 :: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
19/05/23 02:50:00 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcyOTAsImV4cCI6MTY4NTMyMTI5MH0.Qc2edSjLz4ojFHwui-5E9koippYhkVuzWwkqTYLG-3g 
19/05/23 02:50:00 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684457290,
  exp: 1685321290
} 
19/05/23 02:50:00 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:50:00 :: => Requete appelée:         
          SELECT account.email, account.password, customer.*, role.*
          FROM account
          JOIN customer ON account.Id_account = customer.Id_account
          JOIN role ON customer.Id_role = role.Id_role
          WHERE account.email = ?
           
19/05/23 02:50:00 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:50:00 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:50:00 :: ?? On rajoute au REQ pour utilisation futures : {"account":"maxoa59@gmail.com","customer":{"Id_account":6,"Id_customer":6,"Id_role":3,"pseudo":"Secu","firstname":"Maxence","lastname":"ALLART","last_connection":"2023-05-19T00:09:41.000Z","createdBy":"site","createdAt":"2023-04-26T22:00:00.000Z","modifiedBy":"Secu","modifiedAt":"2023-05-17T22:00:00.000Z","deletedBy":null,"deletedAt":null,"img_src":"2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg"},"role":"Administrateur"} 
19/05/23 02:50:17 :: // Appel de la method handleAuth de authController // 
19/05/23 02:50:17 :: ===================================================== 
19/05/23 02:50:17 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:50:17 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:50:17 :: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
19/05/23 02:50:17 :: // Rentrée dans le middleware verifyRefreshToken // 
19/05/23 02:50:17 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcyOTAsImV4cCI6MTY4NTMyMTI5MH0.Qc2edSjLz4ojFHwui-5E9koippYhkVuzWwkqTYLG-3g 
19/05/23 02:50:17 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684457290,
  exp: 1685321290
} 
19/05/23 02:50:17 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:50:17 :: => Requete appelée:         
          SELECT account.email, account.password, customer.*, role.*
          FROM account
          JOIN customer ON account.Id_account = customer.Id_account
          JOIN role ON customer.Id_role = role.Id_role
          WHERE account.email = ?
           
19/05/23 02:50:17 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:50:17 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:50:17 :: ?? On rajoute au REQ pour utilisation futures : {"account":"maxoa59@gmail.com","customer":{"Id_account":6,"Id_customer":6,"Id_role":3,"pseudo":"Secu","firstname":"Maxence","lastname":"ALLART","last_connection":"2023-05-19T00:09:41.000Z","createdBy":"site","createdAt":"2023-04-26T22:00:00.000Z","modifiedBy":"Secu","modifiedAt":"2023-05-17T22:00:00.000Z","deletedBy":null,"deletedAt":null,"img_src":"2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg"},"role":"Administrateur"} 
19/05/23 02:50:27 :: ===================================================== 
19/05/23 02:50:27 :: // Appel de la method handleAuth de authController // 
19/05/23 02:50:27 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:50:27 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:50:27 :: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
19/05/23 02:50:27 :: // Rentrée dans le middleware verifyRefreshToken // 
19/05/23 02:50:27 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcyOTAsImV4cCI6MTY4NTMyMTI5MH0.Qc2edSjLz4ojFHwui-5E9koippYhkVuzWwkqTYLG-3g 
19/05/23 02:50:27 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684457290,
  exp: 1685321290
} 
19/05/23 02:50:27 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:50:27 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:50:27 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:50:27 :: ?? On rajoute au REQ pour utilisation futures : {"account":"maxoa59@gmail.com","customer":{"Id_account":6,"Id_customer":6,"Id_role":3,"pseudo":"Secu","firstname":"Maxence","lastname":"ALLART","last_connection":"2023-05-19T00:09:41.000Z","createdBy":"site","createdAt":"2023-04-26T22:00:00.000Z","modifiedBy":"Secu","modifiedAt":"2023-05-17T22:00:00.000Z","deletedBy":null,"deletedAt":null,"img_src":"2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg"},"role":"Administrateur"} 
19/05/23 02:50:27 :: => Requete appelée:         
          SELECT account.email, account.password, customer.*, role.*
          FROM account
          JOIN customer ON account.Id_account = customer.Id_account
          JOIN role ON customer.Id_role = role.Id_role
          WHERE account.email = ?
           
19/05/23 02:50:30 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:50:30 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:50:30 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:50:30 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:50:30 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:50:30 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:50:30 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:50:30 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:50:36 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:50:36 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:50:36 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:50:36 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:50:36 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:50:36 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:50:36 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:50:36 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:53:19 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:53:19 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:53:19 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:53:19 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:53:19 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:53:19 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:53:19 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:53:19 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:53:54 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:53:54 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:53:54 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:53:54 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:53:54 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:53:54 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:53:54 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:53:54 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:54:00 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:54:00 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:54:00 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:54:00 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:54:00 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:54:00 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:54:00 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:54:00 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:54:28 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:54:28 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:54:28 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:54:28 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:54:28 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:54:28 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:54:28 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:54:28 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:54:33 :: ===================================================== 
19/05/23 02:54:33 :: // Appel de la method handleAuth de authController // 
19/05/23 02:54:33 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:54:33 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:54:33 :: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
19/05/23 02:54:33 :: // Rentrée dans le middleware verifyRefreshToken // 
19/05/23 02:54:33 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcyOTAsImV4cCI6MTY4NTMyMTI5MH0.Qc2edSjLz4ojFHwui-5E9koippYhkVuzWwkqTYLG-3g 
19/05/23 02:54:33 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684457290,
  exp: 1685321290
} 
19/05/23 02:54:33 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:54:33 :: => Requete appelée:         
          SELECT account.email, account.password, customer.*, role.*
          FROM account
          JOIN customer ON account.Id_account = customer.Id_account
          JOIN role ON customer.Id_role = role.Id_role
          WHERE account.email = ?
           
19/05/23 02:54:33 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:54:33 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:54:33 :: ?? On rajoute au REQ pour utilisation futures : {"account":"maxoa59@gmail.com","customer":{"Id_account":6,"Id_customer":6,"Id_role":3,"pseudo":"Secu","firstname":"Maxence","lastname":"ALLART","last_connection":"2023-05-19T00:09:41.000Z","createdBy":"site","createdAt":"2023-04-26T22:00:00.000Z","modifiedBy":"Secu","modifiedAt":"2023-05-17T22:00:00.000Z","deletedBy":null,"deletedAt":null,"img_src":"2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg"},"role":"Administrateur"} 
19/05/23 02:55:12 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:55:12 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:55:12 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:55:12 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:55:12 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:55:12 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:55:12 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:55:12 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:55:25 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:55:25 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:55:25 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:55:25 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:55:25 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:55:25 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:55:25 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:55:25 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:56:46 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:56:46 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:56:46 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:56:46 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:56:46 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:56:46 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:56:46 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:56:46 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:58:00 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:58:00 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:58:00 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:58:00 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:58:00 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:58:00 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:58:00 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:58:00 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:59:07 :: ===================================================== 
19/05/23 02:59:07 :: // Appel de la method handleAuth de authController // 
19/05/23 02:59:07 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:59:07 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:59:07 :: ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
19/05/23 02:59:07 :: // Appel de la method handleRefreshToken de refreshTokenController // 
19/05/23 02:59:07 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTcyOTAsImV4cCI6MTY4NTMyMTI5MH0.Qc2edSjLz4ojFHwui-5E9koippYhkVuzWwkqTYLG-3g 
19/05/23 02:59:07 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684457290,
  exp: 1685321290
} 
19/05/23 02:59:07 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:59:07 :: => Requete appelée:         
      SELECT account.email, account.password, customer.*, role.*
      FROM account
      JOIN customer ON account.Id_account = customer.Id_account
      JOIN role ON customer.Id_role = role.Id_role
      WHERE account.email = ?
       
19/05/23 02:59:07 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:59:07 :: ?? Last info de account trouvé est: { email: 'maxoa59@gmail.com' } 
19/05/23 02:59:07 :: ?? Last info de customer trouvé est: {
  Id_account: 6,
  Id_customer: 6,
  Id_role: 3,
  pseudo: 'Secu',
  firstname: 'Maxence',
  lastname: 'ALLART',
  last_connection: 2023-05-19T00:09:41.000Z,
  createdBy: 'site',
  createdAt: 2023-04-26T22:00:00.000Z,
  modifiedBy: 'Secu',
  modifiedAt: 2023-05-17T22:00:00.000Z,
  deletedBy: null,
  deletedAt: null,
  img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
} 
19/05/23 02:59:07 :: !! L'objet préparé pour le retour au Front est le suivant : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: 2023-05-19T00:09:41.000Z,
    createdBy: 'site',
    createdAt: 2023-04-26T22:00:00.000Z,
    modifiedBy: 'Secu',
    modifiedAt: 2023-05-17T22:00:00.000Z,
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur'
} 
19/05/23 02:59:07 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:59:07 :: ?? Last info de role trouvé est: { title: 'Administrateur' } 
19/05/23 02:59:07 :: ?? Pour information, un refreshToken a été créé pour 10d (Depuis la route refreshToken !): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTc5NDcsImV4cCI6MTY4NTMyMTk0N30.Sza42vXXzhmdfZrZP2RPv9ekv6ruUd8Kudh6yKrXqyY 
19/05/23 02:59:07 :: ==> Tout est ok, On peut renvoyer le nouveau refreshToken et le nouveau accessToken actualisé avec les dernières données. 
19/05/23 02:59:07 :: ?? Pour information, un accessToken a été créé pour 1h (Depuis la route refreshToken !) : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTc5NDcsImV4cCI6MTY4NDQ2MTU0N30.SUT5pUrNUfKddRO4fOzF0EA1-_8otjNa8-tXJm5JWg8 
19/05/23 02:59:08 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:59:08 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:59:08 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:59:08 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:59:08 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:59:08 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:59:08 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:59:08 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:59:13 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:59:13 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:59:13 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:59:13 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:59:13 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:59:13 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:59:13 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:59:13 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:59:46 :: ===================================================== 
19/05/23 02:59:46 :: // Appel de la method handleAuth de authController // 
19/05/23 02:59:46 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 02:59:46 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 02:59:46 :: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
19/05/23 02:59:46 :: // Rentrée dans le middleware verifyRefreshToken // 
19/05/23 02:59:46 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTc5NDcsImV4cCI6MTY4NTMyMTk0N30.Sza42vXXzhmdfZrZP2RPv9ekv6ruUd8Kudh6yKrXqyY 
19/05/23 02:59:46 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:59:46 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684457947,
  exp: 1685321947
} 
19/05/23 02:59:46 :: => Requete appelée:         
          SELECT account.email, account.password, customer.*, role.*
          FROM account
          JOIN customer ON account.Id_account = customer.Id_account
          JOIN role ON customer.Id_role = role.Id_role
          WHERE account.email = ?
           
19/05/23 02:59:46 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 02:59:46 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 02:59:46 :: ?? On rajoute au REQ pour utilisation futures : {"account":"maxoa59@gmail.com","customer":{"Id_account":6,"Id_customer":6,"Id_role":3,"pseudo":"Secu","firstname":"Maxence","lastname":"ALLART","last_connection":"2023-05-19T00:09:41.000Z","createdBy":"site","createdAt":"2023-04-26T22:00:00.000Z","modifiedBy":"Secu","modifiedAt":"2023-05-17T22:00:00.000Z","deletedBy":null,"deletedAt":null,"img_src":"2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg"},"role":"Administrateur"} 
19/05/23 02:59:53 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 02:59:53 :: // Appel de la method QUERY de database.service. // 
19/05/23 02:59:53 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 02:59:53 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 02:59:53 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 02:59:53 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:59:53 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 02:59:53 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:00:02 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 03:00:02 :: // Appel de la method QUERY de database.service. // 
19/05/23 03:00:02 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 03:00:02 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 03:00:02 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:00:02 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 03:00:02 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:00:02 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:00:41 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 03:00:41 :: // Appel de la method QUERY de database.service. // 
19/05/23 03:00:41 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 03:00:41 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 03:00:41 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:00:41 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:00:41 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 03:00:41 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:00:41 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 03:00:41 :: // Appel de la method QUERY de database.service. // 
19/05/23 03:00:41 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 03:00:41 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 03:00:41 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:00:41 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 03:00:41 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:00:41 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:00:46 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 03:00:46 :: // Appel de la method QUERY de database.service. // 
19/05/23 03:00:46 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 03:00:46 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:00:46 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 03:00:46 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:00:46 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:00:46 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 03:01:33 :: ===================================================== 
19/05/23 03:01:33 :: // Appel de la method handleAuth de authController // 
19/05/23 03:01:33 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 03:01:33 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 03:01:33 :: ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
19/05/23 03:01:33 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684457947,
  exp: 1685321947
} 
19/05/23 03:01:33 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTc5NDcsImV4cCI6MTY4NTMyMTk0N30.Sza42vXXzhmdfZrZP2RPv9ekv6ruUd8Kudh6yKrXqyY 
19/05/23 03:01:33 :: // Appel de la method QUERY de database.service. // 
19/05/23 03:01:33 :: // Appel de la method handleRefreshToken de refreshTokenController // 
19/05/23 03:01:33 :: => Requete appelée:         
      SELECT account.email, account.password, customer.*, role.*
      FROM account
      JOIN customer ON account.Id_account = customer.Id_account
      JOIN role ON customer.Id_role = role.Id_role
      WHERE account.email = ?
       
19/05/23 03:01:33 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 03:01:33 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:01:33 :: ?? Last info de customer trouvé est: {
  Id_account: 6,
  Id_customer: 6,
  Id_role: 3,
  pseudo: 'Secu',
  firstname: 'Maxence',
  lastname: 'ALLART',
  last_connection: 2023-05-19T00:09:41.000Z,
  createdBy: 'site',
  createdAt: 2023-04-26T22:00:00.000Z,
  modifiedBy: 'Secu',
  modifiedAt: 2023-05-17T22:00:00.000Z,
  deletedBy: null,
  deletedAt: null,
  img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
} 
19/05/23 03:01:33 :: ?? Last info de role trouvé est: { title: 'Administrateur' } 
19/05/23 03:01:33 :: !! L'objet préparé pour le retour au Front est le suivant : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: 2023-05-19T00:09:41.000Z,
    createdBy: 'site',
    createdAt: 2023-04-26T22:00:00.000Z,
    modifiedBy: 'Secu',
    modifiedAt: 2023-05-17T22:00:00.000Z,
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur'
} 
19/05/23 03:01:33 :: ?? Pour information, un refreshToken a été créé pour 10d (Depuis la route refreshToken !): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTgwOTMsImV4cCI6MTY4NTMyMjA5M30.v6mtPwb7ucwscwbd2eWg80942_0Gc6R6pnjadFQXr-c 
19/05/23 03:01:33 :: ?? Last info de account trouvé est: { email: 'maxoa59@gmail.com' } 
19/05/23 03:01:33 :: ?? Pour information, un accessToken a été créé pour 1h (Depuis la route refreshToken !) : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTgwOTMsImV4cCI6MTY4NDQ2MTY5M30.SMHgyea6gWyovV_p4u1FciQVAz_kEaDdtBhwyOGYOHQ 
19/05/23 03:01:33 :: ==> Tout est ok, On peut renvoyer le nouveau refreshToken et le nouveau accessToken actualisé avec les dernières données. 
19/05/23 03:01:34 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 03:01:34 :: // Appel de la method QUERY de database.service. // 
19/05/23 03:01:34 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 03:01:34 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 03:01:34 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 03:01:34 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:01:34 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:01:34 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:01:38 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 03:01:38 :: // Appel de la method QUERY de database.service. // 
19/05/23 03:01:38 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 03:01:38 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 03:01:38 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:01:38 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:01:38 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 03:01:38 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:01:50 :: // Appel de la method QUERY de database.service. // 
19/05/23 03:01:50 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 03:01:50 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 03:01:50 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 03:01:50 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 03:01:50 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:01:50 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:01:50 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:01:54 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 03:01:54 :: // Appel de la method QUERY de database.service. // 
19/05/23 03:01:54 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 03:01:54 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 03:01:54 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:01:54 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:01:54 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 03:01:54 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:01:57 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 03:01:57 :: // Appel de la method QUERY de database.service. // 
19/05/23 03:01:57 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 03:01:57 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:01:57 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 03:01:57 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:01:57 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 03:01:57 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:02:02 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 03:02:02 :: // Appel de la method QUERY de database.service. // 
19/05/23 03:02:02 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 03:02:02 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 03:02:02 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:02:02 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 03:02:02 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:02:02 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:03:13 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 03:03:13 :: // Appel de la method QUERY de database.service. // 
19/05/23 03:03:13 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 03:03:13 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 03:03:13 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 03:03:13 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:03:13 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:03:13 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:04:30 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 03:04:30 :: // Appel de la method QUERY de database.service. // 
19/05/23 03:04:30 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 03:04:30 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 03:04:30 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 03:04:30 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:04:30 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:04:30 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:05:23 :: ===================================================== 
19/05/23 03:05:23 :: // Appel de la method handleAuth de authController // 
19/05/23 03:05:23 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.accessToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMThUMjA6Mjg6NDMuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTQ5ODEsImV4cCI6MTY4NDQ1ODU4MX0.zdvUTIeSKbkeF6ZRK-pwBgzQGNp9BeJ2VhQuH4fT_Gk 
19/05/23 03:05:23 :: ==> Comparaison du accessTokenCookie avec la secret phrase en .env : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-18T20:28:43.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684454981,
  exp: 1684458581
} 
19/05/23 03:05:23 :: ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
19/05/23 03:05:23 :: // Appel de la method handleRefreshToken de refreshTokenController // 
19/05/23 03:05:23 :: ?? Vérification de la réception en cookie, on a reçu en req?.cookies?.refreshToken : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTgwOTMsImV4cCI6MTY4NTMyMjA5M30.v6mtPwb7ucwscwbd2eWg80942_0Gc6R6pnjadFQXr-c 
19/05/23 03:05:23 :: ?? Décodage du refreshToken avec les informations suivantes : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: '2023-05-19T00:09:41.000Z',
    createdBy: 'site',
    createdAt: '2023-04-26T22:00:00.000Z',
    modifiedBy: 'Secu',
    modifiedAt: '2023-05-17T22:00:00.000Z',
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur',
  iat: 1684458093,
  exp: 1685322093
} 
19/05/23 03:05:23 :: // Appel de la method QUERY de database.service. // 
19/05/23 03:05:23 :: => Requete appelée:         
      SELECT account.email, account.password, customer.*, role.*
      FROM account
      JOIN customer ON account.Id_account = customer.Id_account
      JOIN role ON customer.Id_role = role.Id_role
      WHERE account.email = ?
       
19/05/23 03:05:23 :: ==>Retour de la requete: [
  [
    {
      email: 'maxoa59@gmail.com',
      password: '9heb0dBHj.Ap7bnlnbJeguCP/4hXKxfvXGTlznhPFXZlOwjjemXqi',
      Id_customer: 6,
      pseudo: 'Secu',
      firstname: 'Maxence',
      lastname: 'ALLART',
      last_connection: 2023-05-19T00:09:41.000Z,
      createdBy: 'site',
      createdAt: 2023-04-26T22:00:00.000Z,
      deletedBy: null,
      deletedAt: null,
      modifiedBy: 'Secu',
      modifiedAt: 2023-05-17T22:00:00.000Z,
      Id_account: 6,
      Id_role: 3,
      img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg',
      title: 'Administrateur'
    }
  ]
] 
19/05/23 03:05:23 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:05:23 :: ?? Last info de account trouvé est: { email: 'maxoa59@gmail.com' } 
19/05/23 03:05:23 :: ?? Last info de customer trouvé est: {
  Id_account: 6,
  Id_customer: 6,
  Id_role: 3,
  pseudo: 'Secu',
  firstname: 'Maxence',
  lastname: 'ALLART',
  last_connection: 2023-05-19T00:09:41.000Z,
  createdBy: 'site',
  createdAt: 2023-04-26T22:00:00.000Z,
  modifiedBy: 'Secu',
  modifiedAt: 2023-05-17T22:00:00.000Z,
  deletedBy: null,
  deletedAt: null,
  img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
} 
19/05/23 03:05:23 :: ?? Last info de role trouvé est: { title: 'Administrateur' } 
19/05/23 03:05:23 :: !! L'objet préparé pour le retour au Front est le suivant : {
  account: 'maxoa59@gmail.com',
  customer: {
    Id_account: 6,
    Id_customer: 6,
    Id_role: 3,
    pseudo: 'Secu',
    firstname: 'Maxence',
    lastname: 'ALLART',
    last_connection: 2023-05-19T00:09:41.000Z,
    createdBy: 'site',
    createdAt: 2023-04-26T22:00:00.000Z,
    modifiedBy: 'Secu',
    modifiedAt: 2023-05-17T22:00:00.000Z,
    deletedBy: null,
    deletedAt: null,
    img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg'
  },
  role: 'Administrateur'
} 
19/05/23 03:05:23 :: ?? Pour information, un accessToken a été créé pour 1h (Depuis la route refreshToken !) : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTgzMjMsImV4cCI6MTY4NDQ2MTkyM30.WB1ndB2YLi3DN4zrH8I8ZFe2-SsT7AfaX0Yob68sTJA 
19/05/23 03:05:23 :: ?? Pour information, un refreshToken a été créé pour 10d (Depuis la route refreshToken !): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoibWF4b2E1OUBnbWFpbC5jb20iLCJjdXN0b21lciI6eyJJZF9hY2NvdW50Ijo2LCJJZF9jdXN0b21lciI6NiwiSWRfcm9sZSI6MywicHNldWRvIjoiU2VjdSIsImZpcnN0bmFtZSI6Ik1heGVuY2UiLCJsYXN0bmFtZSI6IkFMTEFSVCIsImxhc3RfY29ubmVjdGlvbiI6IjIwMjMtMDUtMTlUMDA6MDk6NDEuMDAwWiIsImNyZWF0ZWRCeSI6InNpdGUiLCJjcmVhdGVkQXQiOiIyMDIzLTA0LTI2VDIyOjAwOjAwLjAwMFoiLCJtb2RpZmllZEJ5IjoiU2VjdSIsIm1vZGlmaWVkQXQiOiIyMDIzLTA1LTE3VDIyOjAwOjAwLjAwMFoiLCJkZWxldGVkQnkiOm51bGwsImRlbGV0ZWRBdCI6bnVsbCwiaW1nX3NyYyI6IjIwMjMtMDUtMThUMjMtMTMtNTMuMjU0Wi1JTUdfMjAyMDA2MjBfMjIxNzM5LmpwZyJ9LCJyb2xlIjoiQWRtaW5pc3RyYXRldXIiLCJpYXQiOjE2ODQ0NTgzMjMsImV4cCI6MTY4NTMyMjMyM30.wm-bC2hhY5VofllzaN8j_SHhx12ZeeTuTj1XW6322xE 
19/05/23 03:05:23 :: ==> Tout est ok, On peut renvoyer le nouveau refreshToken et le nouveau accessToken actualisé avec les dernières données. 
19/05/23 03:05:24 :: // Appel de la method downloadAvatarByIdCustomer de avatarController// 
19/05/23 03:05:24 :: // Appel de la method QUERY de database.service. // 
19/05/23 03:05:24 :: => Requete appelée: 
        SELECT img_src
        FROM customer 
        WHERE Id_customer = ?
         
19/05/23 03:05:24 :: ==>Retour de la requete: [ [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] ] 
19/05/23 03:05:24 :: yo le filename est : 2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
19/05/23 03:05:24 :: yo la data trouvée est : [ { img_src: '2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg' } ] 
19/05/23 03:05:24 :: ---> Sortie de la method QUERY de database.service. // 
19/05/23 03:05:24 :: yo donc le filepath est : C:\Users\cQpro Fixe\Desktop\Work\Project File Rouge\v3\newBackendApi\uploads\avatars\6\2023-05-18T23-13-53.254Z-IMG_20200620_221739.jpg 
